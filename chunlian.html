<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ–°æ˜¥ç¥ç¦ ğŸ§§</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: "Microsoft YaHei", sans-serif; background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100vh; color: #fff; overflow: hidden; }
        
        /* åˆå§‹è¾“å…¥å¼¹çª— */
        .start-modal { display: flex; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 999; justify-content: center; align-items: center; flex-direction: column; }
        .start-modal.hide { display: none; }
        .start-content { background: linear-gradient(135deg, #e74c3c, #c0392b); border-radius: 25px; padding: 40px 30px; width: 85%; max-width: 350px; text-align: center; border: 4px solid #ffd700; box-shadow: 0 0 40px rgba(255,215,0,0.5); }
        .start-title { color: #ffd700; font-size: 1.5rem; margin-bottom: 10px; font-weight: bold; text-shadow: 0 0 15px rgba(255,215,0,0.6); }
        .start-subtitle { color: rgba(255,255,255,0.8); font-size: 0.95rem; margin-bottom: 25px; }
        .start-input { width: 100%; padding: 15px; font-size: 1.3rem; border: 3px solid #ffd700; border-radius: 15px; text-align: center; outline: none; background: rgba(255,255,255,0.95); color: #333; margin-bottom: 20px; }
        .start-btn { width: 100%; padding: 16px; font-size: 1.2rem; font-weight: bold; border: none; border-radius: 15px; cursor: pointer; background: #ffd700; color: #8B0000; transition: all 0.3s; }
        .start-btn:active { transform: scale(0.96); }

        .bg-decorations { position: fixed; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; z-index: 0; }
        .lantern { position: absolute; width: 45px; height: 60px; background: linear-gradient(180deg, #e74c3c, #c0392b); border-radius: 0 0 50% 50%; animation: swing 3s ease-in-out infinite; box-shadow: 0 0 25px rgba(231,76,60,0.6); }
        .lantern::before { content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 15px; height: 10px; background: #d4af37; }
        .lantern:nth-child(1) { top: 5px; left: 5%; animation-delay: 0s; }
        .lantern:nth-child(2) { top: 15px; left: 30%; animation-delay: 0.5s; }
        .lantern:nth-child(3) { top: 3px; left: 55%; animation-delay: 1s; }
        .lantern:nth-child(4) { top: 15px; left: 80%; animation-delay: 1.5s; }
        @keyframes swing { 0%, 100% { transform: rotate(-6deg); } 50% { transform: rotate(6deg); } }

        .falling { position: absolute; pointer-events: none; z-index: 100; font-size: 30px; animation: fallDown 2s linear forwards; }
        @keyframes fallDown { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

        .rising-bless { position: absolute; pointer-events: none; z-index: 101; font-size: 22px; font-weight: bold; text-shadow: 0 0 10px rgba(255,215,0,0.8), 2px 2px 4px rgba(0,0,0,0.5); animation: riseUp 2.5s ease-out forwards; white-space: nowrap; }
        @keyframes riseUp { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 20% { opacity: 1; transform: translateY(-30px) scale(1.1); } 80% { opacity: 1; } 100% { transform: translateY(-300px) scale(1); opacity: 0; } }

        .container { display: none; position: relative; z-index: 1; min-height: 100vh; flex-direction: column; justify-content: center; align-items: center; padding: 60px 20px 100px; cursor: pointer; }
        .container.show { display: flex; }

        .top-title { position: fixed; top: 15px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #e74c3c, #c0392b); color: #ffd700; padding: 8px 20px; border-radius: 20px; font-size: 1rem; font-weight: bold; z-index: 10; box-shadow: 0 4px 15px rgba(231,76,60,0.4); }

        .tap-hint { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.8); font-size: 1rem; text-align: center; z-index: 10; background: rgba(0,0,0,0.3); padding: 10px 20px; border-radius: 25px; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); } 50% { opacity: 1; transform: translateX(-50%) scale(1.05); } }

        .couplet-card { background: linear-gradient(135deg, #8B0000, #a52a2a); border-radius: 20px; padding: 35px 20px; text-align: center; border: 4px solid #ffd700; box-shadow: 0 0 40px rgba(255,215,0,0.4); max-width: 90%; width: 320px; }
        .couplet-title { color: #ffd700; font-size: 1.3rem; margin-bottom: 20px; text-shadow: 0 0 15px rgba(255,215,0,0.6); }
        .couplet-row { display: flex; gap: 25px; justify-content: center; margin: 15px 0; }
        .couplet-text { font-family: "KaiTi", serif; font-size: 1.5rem; line-height: 2.2; color: #ffd700; writing-mode: vertical-rl; text-orientation: upright; }
        .couplet-heng { background: #ffd700; color: #8B0000; padding: 6px 20px; font-size: 1.1rem; font-weight: bold; border-radius: 5px; display: inline-block; margin: 12px 0; }
        .author { color: rgba(255,215,0,0.7); font-size: 0.8rem; margin-top: 15px; }
        .fu-container { margin: 15px 0; }
        .fu { font-size: 3rem; color: #e74c3c; text-shadow: 0 0 20px rgba(231,76,60,0.8); font-weight: bold; display: inline-block; }

        .bottom-actions { display: none; position: fixed; bottom: 80px; left: 0; right: 0; justify-content: center; gap: 15px; z-index: 10; flex-wrap: wrap; }
        .bottom-actions.show { display: flex; }
        .action-btn { padding: 12px 25px; font-size: 0.95rem; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; transition: all 0.3s; }
        .share-btn { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; }
        .new-btn { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .action-btn:active { transform: scale(0.95); }

        .copy-toast { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.85); color: white; padding: 18px 35px; border-radius: 15px; font-size: 1rem; display: none; z-index: 1000; animation: fadeInOut 2s; }
        @keyframes fadeInOut { 0% { opacity: 0; } 20% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }

        .click-count { position: fixed; top: 60px; right: 15px; background: rgba(231,76,60,0.9); color: white; padding: 6px 12px; border-radius: 15px; font-size: 0.8rem; z-index: 100; }
    </style>
</head>
<body>
    <!-- åˆå§‹è¾“å…¥å¼¹çª— -->
    <div class="start-modal" id="startModal">
        <div class="start-content">
            <div class="start-title">ğŸ§§ æ–°æ˜¥ç¥ç¦ ğŸ§§</div>
            <div class="start-subtitle">å…ˆè¾“å…¥ä½ çš„åå­—ï¼Œå¼€å¯ç¥ç¦ä¹‹æ—…</div>
            <input type="text" class="start-input" id="nameInput" placeholder="è¯·è¾“å…¥ä½ çš„åå­—" maxlength="5">
            <button class="start-btn" onclick="startGame()">å¼€å§‹ç¥ç¦ âœ¨</button>
        </div>
    </div>

    <div class="bg-decorations">
        <div class="lantern"></div><div class="lantern"></div><div class="lantern"></div><div class="lantern"></div>
    </div>

    <div class="top-title" id="topTitle">ğŸ§§ <span id="titleName">æœ‹å‹</span> çš„æ–°æ˜¥ç¥ç¦ ğŸ§§</div>
    <div class="click-count" id="clickCount">ç‚¹å‡»: 0</div>

    <div class="container" id="container" onclick="handleClick(event)">
        <div class="couplet-card">
            <div class="couplet-row">
                <div class="couplet-text"><div id="shangLian">é¾™è…¾ç››ä¸–</div></div>
                <div class="couplet-text"><div id="xiaLian">å‡¤èˆæ˜¥é£</div></div>
            </div>
            <div class="couplet-heng" id="hengLian">è¿æ˜¥æ¥ç¦</div>
            <div class="fu-container"><span class="fu">ç¦</span><span class="fu" style="transform:rotate(180deg);display:inline-block;">ç¦</span></div>
            <div class="author">â€”â€” ç‚¹å‡»å±å¹•äº§ç”ŸæƒŠå–œ</div>
        </div>
        <div class="tap-hint">ğŸ‘† å¿«æˆ³å±å¹•ï¼Œæœ‰æƒŠå–œï¼</div>
    </div>

    <div class="bottom-actions" id="bottomActions">
        <button class="action-btn new-btn" onclick="event.stopPropagation();newCouplet()">ğŸ”„ æ¢ä¸€å¹…</button>
        <button class="action-btn share-btn" onclick="event.stopPropagation();shareToFriends()">ğŸ“¤ è½¬å‘ç¥ç¦</button>
    </div>

    <div class="copy-toast" id="toast">å·²å¤åˆ¶ï¼æ‰“å¼€å¥½å‹èŠå¤©ç²˜è´´å‘é€~</div>

    <script>
        const couplets = [
            {shang:"é¾™è…¾ç››ä¸–åƒå®¶å–œ",xia:"å‡¤èˆæ˜¥é£ä¸‡ç‰©è‹",heng:"è¿æ˜¥æ¥ç¦"},
            {shang:"å¹´å¹´æœ‰ä½™åº†ä¸°æ”¶",xia:"å²å²å¹³å®‰è¿æ–°æ˜¥",heng:"å‰ç¥¥å¦‚æ„"},
            {shang:"é‡‘ç‰æ»¡å ‚ç¦æ˜Ÿç…§",xia:"ç´«æ°”ä¸œæ¥è´¢æºå¹¿",heng:"å¯Œè´µç›ˆé—¨"},
            {shang:"æ˜¥åˆ°äººé—´æ·»ç™¾ç¦",xia:"å–œä¸´é—¨ç¬¬æ²æ˜¥é£",heng:"æ–°æ˜¥å¤§å‰"},
            {shang:"å’Œæ°”ç”Ÿè´¢ç¦æ»¡å ‚",xia:"å¿ƒæƒ³äº‹æˆä¸šå…´éš†",heng:"ä¸‡äº‹å¦‚æ„"},
            {shang:"è´¢æºå¹¿è¿›è¾¾ä¸‰æ±Ÿ",xia:"ç”Ÿæ„å…´éš†é€šå››æµ·",heng:"æ­å–œå‘è´¢"},
            {shang:"èº«ä½“å¥åº·ç²¾ç¥å¥½",xia:"å®¶åº­å’Œç¦ä¸‡äº‹å…´",heng:"å¹¸ç¦ç¾æ»¡"},
            {shang:"å­¦ä¸šè¿›æ­¥å‰ç¨‹é”¦",xia:"äº‹ä¸šæœ‰æˆæ­¥æ­¥é«˜",heng:"é¹ç¨‹ä¸‡é‡Œ"},
            {shang:"é¾™é©¬ç²¾ç¥é€å‰ç¥¥",xia:"ç‘æ°”ç›ˆé—¨é€ç¦æ¥",heng:"å¤§å‰å¤§åˆ©"},
            {shang:"ç¦æ˜Ÿé«˜ç…§æ»¡å ‚å½©",xia:"å–œæ°”ç›ˆé—¨ä¸‡äº‹å…´",heng:"ç¦æ»¡äººé—´"},
        ];
        const blessings = ["æ­å–œå‘è´¢","è´¢æºå¹¿è¿›","ä¸‡äº‹å¦‚æ„","å‰ç¥¥å¦‚æ„","æ–°æ˜¥å¿«ä¹","æ­¥æ­¥é«˜å‡","å­¦ä¸šæœ‰æˆ","äº‹ä¸šè¾‰ç…Œ","èº«ä½“å¥åº·","å®¶åº­å¹¸ç¦","å¿ƒæƒ³äº‹æˆ","å‰æ˜Ÿé«˜ç…§","ç¦æ°”æ»¡æ»¡","é‡‘ç‰æ»¡å ‚"];
        const goldItems = ['ğŸ§§','ğŸ’°','ğŸ','ğŸ§¨','ğŸŠ','âœ¨','ğŸ’','ğŸ‰'];
        let clickCount = 0;
        let currentName = '';

        function startGame() {
            const name = document.getElementById('nameInput').value.trim();
            if (!name) { alert('è¯·è¾“å…¥ä½ çš„åå­—ï¼'); return; }
            currentName = name;
            document.getElementById('titleName').textContent = name;
            document.getElementById('startModal').classList.add('hide');
            document.getElementById('container').classList.add('show');
            document.getElementById('bottomActions').classList.add('show');
            newCouplet();
        }

        function newCouplet() { 
            const r = couplets[Math.floor(Math.random()*couplets.length)]; 
            document.getElementById('shangLian').textContent=r.shang; 
            document.getElementById('xiaLian').textContent=r.xia; 
            document.getElementById('hengLian').textContent=r.heng; 
        }
        
        function handleClick(e) {
            clickCount++;
            document.getElementById('clickCount').textContent='ç‚¹å‡»: '+clickCount;
            createFallingGold(e.clientX,e.clientY);
            if(Math.random()>0.3) createRisingBless(e.clientX,e.clientY);
        }
        function createFallingGold(x,y) {
            const item=document.createElement('div');
            item.className='falling';
            item.textContent=goldItems[Math.floor(Math.random()*goldItems.length)];
            item.style.left=(x-15)+'px';
            item.style.top=(y-15)+'px';
            document.body.appendChild(item);
            setTimeout(()=>item.remove(),2000);
        }
        function createRisingBless(x,y) {
            const bless=document.createElement('div');
            bless.className='rising-bless';
            bless.textContent=blessings[Math.floor(Math.random()*blessings.length)];
            bless.style.left=(x-50+Math.random()*100)+'px';
            bless.style.top=y+'px';
            const colors=['#ffd700','#ff6b6b','#e74c3c','#27ae60','#3498db'];
            bless.style.color=colors[Math.floor(Math.random()*colors.length)];
            document.body.appendChild(bless);
            setTimeout(()=>bless.remove(),2500);
        }

        function shareToFriends() {
            const name=currentName;
            const shang=document.getElementById('shangLian').textContent;
            const xia=document.getElementById('xiaLian').textContent;
            const heng=document.getElementById('hengLian').textContent;
            const shareUrl=window.location.href.split('?')[0];
            const shareText=`ğŸ§§ ç»™${name}çš„æ–°æ˜¥ç¥ç¦ ğŸ§§\n\nä¸Šè”ï¼š${shang}\nä¸‹è”ï¼š${xia}\næ¨ªæ‰¹ï¼š${heng}\n\nğŸ‘† ç‚¹å‡»é“¾æ¥ï¼Œä½ ä¹Ÿèƒ½æ”¶åˆ°ç¥ç¦ï¼\n\n${shareUrl}`;
            if(navigator.clipboard){
                navigator.clipboard.writeText(shareText).then(()=>showToast('å·²å¤åˆ¶ï¼æ‰“å¼€å¥½å‹èŠå¤©ç²˜è´´å‘é€~'));
            }
        }
        function showToast(msg){
            const t=document.getElementById('toast');
            t.textContent=msg;
            t.style.display='block';
            setTimeout(()=>t.style.display='none',2500);
        }

        // å›è½¦å¼€å§‹
        document.getElementById('nameInput').addEventListener('keypress',function(e){
            if(e.key==='Enter') startGame();
        });
    </script>
</body>
</html>
